# OSPF(open shortest path first)

오픈소스임ㅇㅇ
LS routing algorithm
모든 라우터는 플루딩을 통해서 전달함.
전체 네트웤에 대한 정보를 받아서 topology db를 구축하고, 이를 기반으로 ls 알고리즘을 적용해서 라우팅 테이블을 만듬
IP레이어에서 동작함.

RIP는 어플리케이션 레이어에서 동작해서 정보를 주고받은 다음 커널을 통해 ip 라우팅 테이블에 반영시키는 이중작업
OSPF는 OSPF 메시지가 만들어지면 바로 ip헤더를 붙여서 밑에 레이어로 내려가서 전달

현재 v2를 사용함. 1998년

### OSPF는 특징들

시큐리티가 강조됨
RIP는 소스부터 데스티네이션까지 1개 패스인데 OSPF는 옵셔널하게 동일한 코스트면 여러 패스를 동시에 운영해서 로드 밸런싱 가능. 패킷이 몰리는 컨제스쳔을 방지함.
unicast, multicast 지원함
rip는 유니캐스트만 지원
계층구조를 가짐

### OSPF 동작

라우트 부팅하면
Down state - init state - two way state 까지 가서 옆에 라우터랑 정보를 주고받아서 기본적인 link state information을 구축함
그 다음 플러딩에 의해 다른 라우트에게 lif를 보내고 받으면 loading state
이걸 이용해서 LS 알고리즘으로 라우팅 테이블을 만듦 -> full state

1. 라우터가 부팅하면 hello packets 을 교환함 서로 -> 직접연결된 애들이랑 link state info를 나눔
2. 그걸 플러딩(오버헤드가 있음)함. 오버헤드를 줄이려고 플러딩을 대신해주는 라우터를 선정해서 플러딩의 경우의 수를 줄이는게 사이에 있음. -> 그 결과로 네트웤에 모든 LSDB가 만들어짐.
3. 여기에 다익스트라 알고리즘을 동작시켜서, 트리와 테이블을 만듬.

### OSPF 계층

기본적으로 OSPF는 백본 영역이 있고 거기서 에리어를 나눔.
two level hierarchy

RIP는 플랫한 라우팅 구조를 나타냄. (대부분 ip 라우팅 프로토콜이 플랫함. )
플랫하다 ? -> 어떤 라우터가 정보를 인접라우터를 통해서든 뭐든 모든 라우터에게 전달함. 만약 한 라우터에 문제가 생기면 다른 라우터들은 반영하지 못해서 라우팅 성능에 문제가 생김.
한 라우터의 문제가 전체에 영향을 미침

그에 반해 OSPF는 라우팅을 업데이트 하는 걸 area로 국한함. area에 있는 area border router는 이 정보를 요약해서 aggregatione된 정보를 백본들이 서로 주고받도록 해서 다른 에리어에서 다른 에리어로 라우팅되는 구조!
한 애리어에서 업데이트된건 애리어 거기서만 일어나는 일임.
다른 영역에 영향을 안줌. 전반적으로 네트웤이 안정적임.

RIP는 DV를 사용해서 계산이 간단하고 -> 더하고 빼면되서 저렴함 -> 저렴해서 많이 쓰임
OSPF는 다익스트라 알고로 계산이 복잡함 -> 라우터를 만들때 cpu가 좋아야함. 비용이 높다 -> 요즘은 씨피유가 워낙 좋아서 OSPF 돌리는데 문제가 없음. -> 근데 복잡한 구조가 있어서 네트웤 설정에 전문적 지식이 필요함. 운영자가 OSPF 이해가 부족해서 그래도 잘 못쓰임.
